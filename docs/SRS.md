# Техническое задание (SRS)
# RCMS-GA — Radio Control and Monitoring System for General Aviation

**Версия:** 1.0
**Дата:** 2026-01-11
**Автор:** Balalaika

---

## 1. Введение

### 1.1 Назначение документа

Настоящее техническое задание определяет требования к программному обеспечению RCMS-GA — универсальной системе дистанционного управления и мониторинга радиостанций гражданской авиации Российской Федерации.

### 1.2 Область применения

Система предназначена для служб ЭРТОС (Эксплуатация радиотехнического оборудования и связи) аэропортов, центров ОВД (Организация воздушного движения) и других организаций, эксплуатирующих наземное радиооборудование воздушной связи.

### 1.3 Целевая аудитория

- Сменные инженеры службы ЭРТОС
- Техники радионавигации, радиолокации и связи
- Диспетчеры технических служб аэропортов

---

## 2. Общее описание

### 2.1 Перспектива продукта

RCMS-GA заполняет нишу отсутствующего на рынке РФ профессионального ПО для управления радиостанциями по интерфейсу RS-485. Существующие решения — либо закрытые дорогостоящие системы (АО "Азимут"), либо несертифицированные самоделки энтузиастов.

### 2.2 Функции продукта

| Функция | Описание |
|---------|----------|
| Мониторинг | Отображение состояния всех радиостанций в сети |
| Управление частотой | Дистанционная смена рабочей частоты |
| Управление ПШ | Включение/выключение подавителя шума |
| Управление PTT | Включение/выключение передачи |
| Диагностика | Просмотр кодов ошибок и состояния узлов |
| Журналирование | Запись всех событий с метками времени |
| Оповещение | Звуковая и визуальная сигнализация аварий |

### 2.3 Классы пользователей

| Класс | Права |
|-------|-------|
| Оператор | Просмотр статуса, журнала |
| Инженер | Оператор + управление частотой, ПШ |
| Администратор | Инженер + настройка системы, PTT |

### 2.4 Операционная среда

- **ОС:** Linux (Debian 11+, РЕД ОС 7.3+, Astra Linux 1.7+)
- **Архитектура:** x86_64, возможно ARM64
- **Минимальные требования:**
  - CPU: 1 ГГц
  - RAM: 512 МБ
  - Диск: 100 МБ
  - Порт: RS-485 (через USB-конвертер или встроенный)

### 2.5 Ограничения

- Работа только по интерфейсу RS-485 (Modbus RTU)
- Первая версия поддерживает только радиостанции серии "Фазан-19"
- Не является средством управления воздушным движением

---

## 3. Функциональные требования

### 3.1 Подключение и обнаружение устройств

| ID | Требование |
|----|------------|
| FR-001 | Система должна поддерживать подключение через COM-порт (RS-485) |
| FR-002 | Система должна позволять указать диапазон Modbus-адресов для сканирования (1-247) |
| FR-003 | Система должна автоматически определять тип радиостанции по ID |
| FR-004 | Система должна поддерживать до 32 устройств на одной шине RS-485 |
| FR-005 | Система должна поддерживать работу через LAN/RS-485 конвертеры (Modbus RTU over TCP) |

### 3.2 Мониторинг состояния

| ID | Требование |
|----|------------|
| FR-010 | Система должна циклически опрашивать все устройства (интервал настраивается, по умолчанию 2 сек) |
| FR-011 | Система должна отображать для каждой радиостанции: |
|        | - Статус связи (онлайн/оффлайн) |
|        | - Текущая частота (кГц) |
|        | - Режим управления (МУ/ДУ) |
|        | - Режим работы (ТЛФ/ДАН) |
|        | - Состояние ПШ (вкл/выкл) |
|        | - Уровень сигнала приёмника |
|        | - Напряжение питания (+24В) |
|        | - Напряжение аккумулятора |
|        | - Температура |
|        | - Наработка (часы) |
|        | - Коды ошибок |
| FR-012 | Система должна визуально выделять устройства с ошибками (красный цвет) |
| FR-013 | Система должна визуально выделять устройства без связи (серый цвет) |

### 3.3 Управление радиостанцией

| ID | Требование |
|----|------------|
| FR-020 | Система должна позволять изменять рабочую частоту в диапазоне 118.000-136.975 МГц |
| FR-021 | Система должна поддерживать шаг сетки 8.33 кГц и 25 кГц |
| FR-022 | Система должна позволять включать/выключать подавитель шума |
| FR-023 | Система должна позволять изменять уровень подавителя шума |
| FR-024 | Система должна позволять включать/выключать передачу (PTT) — только для роли "Администратор" |
| FR-025 | Система должна запрашивать подтверждение перед выполнением управляющих команд |

### 3.4 Диагностика

| ID | Требование |
|----|------------|
| FR-030 | Система должна отображать расшифровку кодов ошибок |
| FR-031 | Система должна позволять запускать встроенный тест радиостанции |
| FR-032 | Система должна отображать значения всех АЦП каналов (для диагностики) |

### 3.5 Журналирование

| ID | Требование |
|----|------------|
| FR-040 | Система должна записывать все события в журнал с меткой времени |
| FR-041 | Журнал должен храниться в локальной БД (SQLite) |
| FR-042 | Система должна позволять фильтровать журнал по устройству, типу события, дате |
| FR-043 | Система должна позволять экспортировать журнал в CSV |
| FR-044 | Система должна хранить журнал минимум 1 год |

### 3.6 Оповещение

| ID | Требование |
|----|------------|
| FR-050 | Система должна воспроизводить звуковой сигнал при возникновении аварии |
| FR-051 | Система должна показывать всплывающее уведомление при аварии |
| FR-052 | Система должна позволять квитировать (подтвердить) аварию |

---

## 4. Нефункциональные требования

### 4.1 Производительность

| ID | Требование |
|----|------------|
| NF-001 | Время запуска приложения — не более 3 секунд |
| NF-002 | Время отклика GUI — не более 100 мс |
| NF-003 | Потребление RAM — не более 200 МБ при 32 устройствах |
| NF-004 | Потребление CPU — не более 5% в режиме мониторинга |

### 4.2 Надёжность

| ID | Требование |
|----|------------|
| NF-010 | Система должна автоматически восстанавливать связь при обрыве |
| NF-011 | Система должна корректно обрабатывать таймауты Modbus |
| NF-012 | Система не должна терять данные журнала при аварийном завершении |

### 4.3 Безопасность

| ID | Требование |
|----|------------|
| NF-020 | Система должна требовать аутентификацию при запуске |
| NF-021 | Система должна разграничивать права по ролям |
| NF-022 | Система должна журналировать все действия пользователей |

### 4.4 Переносимость

| ID | Требование |
|----|------------|
| NF-030 | Система должна работать на Debian 11+ |
| NF-031 | Система должна работать на РЕД ОС 7.3+ |
| NF-032 | Система должна работать на Astra Linux 1.7+ |
| NF-033 | Система должна поставляться как статически слинкованный бинарник или AppImage |

### 4.5 Локализация

| ID | Требование |
|----|------------|
| NF-040 | Интерфейс полностью на русском языке |
| NF-041 | Документация на русском языке |

---

## 5. Поддерживаемое оборудование

### 5.1 Версия 1.0 (MVP)

| Производитель | Модель | Протокол |
|---------------|--------|----------|
| ОАО "Электроприбор" (Владимир) | Фазан-19 Р5 | Modbus RTU |
| ОАО "Электроприбор" (Владимир) | Фазан-19 Р50 | Modbus RTU |
| ОАО "Электроприбор" (Владимир) | Фазан-19 П50 | Modbus RTU |
| ОАО "Электроприбор" (Владимир) | Фазан-19 ПРМ | Modbus RTU |

### 5.2 Планируемые (версия 2.0+)

| Производитель | Модель | Протокол |
|---------------|--------|----------|
| ? | РС П1000 | ? |
| АО "Азимут" | TRS 2000 | ? (закрытый) |

---

## 6. Интерфейс пользователя

### 6.1 Главное окно

```
┌─────────────────────────────────────────────────────────────────────┐
│ RCMS-GA — Управление радиостанциями                    [_][□][X]    │
├─────────────────────────────────────────────────────────────────────┤
│ Файл  Устройства  Вид  Настройки  Справка                           │
├───────────────┬─────────────────────────────────────────────────────┤
│ Устройства    │  Статус устройства: Фазан-19 Р5 #1                  │
│               │ ┌─────────────────────────────────────────────────┐ │
│ ▼ COM3        │ │ Состояние:     [●] НОРМА                        │ │
│   [●] Фазан #1│ │ Частота:       127.400 МГц                      │ │
│   [●] Фазан #2│ │ Режим:         ДУ / ТЛФ                         │ │
│   [○] Фазан #3│ │ ПШ:            ВКЛ (уровень: 5)                 │ │
│   [●] Фазан #4│ │ Сигнал ПРМ:    605                              │ │
│               │ │ Питание:       29.33 В                          │ │
│               │ │ Аккумулятор:   0.00 В                           │ │
│               │ │ Температура:   28 °C                            │ │
│               │ │ Наработка:     12345 ч                          │ │
│               │ └─────────────────────────────────────────────────┘ │
│               │ ┌─────────────────────────────────────────────────┐ │
│               │ │ Управление                                      │ │
│               │ │ Частота: [127.400] МГц  [Применить]             │ │
│               │ │ ПШ: [●] Вкл  [ ] Выкл   Уровень: [5▼]           │ │
│               │ └─────────────────────────────────────────────────┘ │
├───────────────┴─────────────────────────────────────────────────────┤
│ Журнал событий                                          [Очистить] │
│ ┌─────────────────────────────────────────────────────────────────┐ │
│ │ 15:52:23  Фазан #1  INFO   Частота изменена: 127.400 МГц       │ │
│ │ 15:52:21  Фазан #2  WARN   Потеря связи                        │ │
│ │ 15:51:05  Фазан #1  INFO   ПШ включен                          │ │
│ └─────────────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────────────┤
│ Подключено: 4/6 │ COM3: 9600 8N1 │ Пользователь: engineer         │
└─────────────────────────────────────────────────────────────────────┘
```

### 6.2 Цветовая индикация

| Цвет | Значение |
|------|----------|
| Зелёный (●) | Норма, устройство работает |
| Жёлтый (◐) | Предупреждение |
| Красный (○) | Авария или нет связи |
| Серый | Устройство отключено |

---

## 7. Архитектура системы

### 7.1 Диаграмма компонентов

```
┌─────────────────────────────────────────────────────────────────┐
│                         RCMS-GA                                  │
├─────────────────────────────────────────────────────────────────┤
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                    GUI Layer (Qt Widgets)                 │  │
│  │  MainWindow │ DeviceTree │ StatusPanel │ ControlPanel     │  │
│  └───────────────────────────────────────────────────────────┘  │
│                              │                                   │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                   Core Layer                              │  │
│  │  DeviceManager │ AlarmManager │ ConfigManager │ Logger    │  │
│  └───────────────────────────────────────────────────────────┘  │
│                              │                                   │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │                Protocol Layer                             │  │
│  │  IRadioDevice │ Fazan19Device │ [future: RSP1000Device]   │  │
│  └───────────────────────────────────────────────────────────┘  │
│                              │                                   │
│  ┌───────────────────────────────────────────────────────────┐  │
│  │               Communication Layer                         │  │
│  │  ModbusRTU │ SerialPort │ CRC16                           │  │
│  └───────────────────────────────────────────────────────────┘  │
└─────────────────────────────────────────────────────────────────┘
                               │
                         ┌─────┴─────┐
                         │  RS-485   │
                         └─────┬─────┘
                    ┌──────────┼──────────┐
                    ▼          ▼          ▼
               [Фазан #1] [Фазан #2] [Фазан #N]
```

### 7.2 Структура каталогов

```
rcms-ga/
├── CMakeLists.txt
├── README.md
├── LICENSE
├── docs/
│   ├── SRS.md                    # Это ТЗ
│   ├── PLAN.md                   # План разработки
│   ├── PROTOCOL_FAZAN19.md       # Протокол Фазан-19
│   └── MARKET_RESEARCH.md        # Исследование рынка
├── src/
│   ├── main.cpp
│   ├── core/
│   │   ├── DeviceManager.h/cpp   # Управление устройствами
│   │   ├── AlarmManager.h/cpp    # Обработка аварий
│   │   ├── ConfigManager.h/cpp   # Конфигурация (JSON)
│   │   ├── Logger.h/cpp          # Журналирование (SQLite)
│   │   └── UserManager.h/cpp     # Пользователи и роли
│   ├── protocol/
│   │   ├── IRadioDevice.h        # Интерфейс устройства
│   │   ├── Fazan19Device.h/cpp   # Реализация Фазан-19
│   │   ├── Fazan19Registers.h    # Карта регистров
│   │   └── ModbusRTU.h/cpp       # Modbus RTU протокол
│   ├── comm/
│   │   ├── SerialPort.h/cpp      # Работа с COM-портом
│   │   └── CRC16.h/cpp           # CRC-16 Modbus
│   ├── gui/
│   │   ├── MainWindow.h/cpp/ui
│   │   ├── DeviceTreeWidget.h/cpp
│   │   ├── StatusPanel.h/cpp
│   │   ├── ControlPanel.h/cpp
│   │   ├── EventLogWidget.h/cpp
│   │   ├── LoginDialog.h/cpp/ui
│   │   └── SettingsDialog.h/cpp/ui
│   └── resources/
│       ├── icons/
│       ├── sounds/
│       └── translations/
├── tests/
│   ├── test_crc16.cpp
│   ├── test_fazan19.cpp
│   └── test_modbus.cpp
└── config/
    └── default.json
```

---

## 8. Этапы разработки

### Этап 1: Фундамент (Неделя 1-2)

- [ ] Настройка CMake + Qt
- [ ] CRC-16 Modbus с тестами
- [ ] SerialPort (libserialport)
- [ ] ModbusRTU базовый класс
- [ ] Логирование (spdlog)

### Этап 2: Протокол Фазан-19 (Неделя 3-4)

- [ ] Fazan19Device — чтение регистров
- [ ] Fazan19Device — запись частоты
- [ ] Fazan19Device — управление ПШ
- [ ] Парсинг всех параметров
- [ ] Unit-тесты протокола

### Этап 3: Core Logic (Неделя 5)

- [ ] DeviceManager — polling
- [ ] AlarmManager — события
- [ ] ConfigManager — JSON
- [ ] Logger — SQLite

### Этап 4: GUI (Неделя 6-7)

- [ ] MainWindow каркас
- [ ] DeviceTreeWidget
- [ ] StatusPanel
- [ ] ControlPanel
- [ ] EventLogWidget
- [ ] Диалоги настроек

### Этап 5: Интеграция (Неделя 8)

- [ ] Тестирование с реальным оборудованием
- [ ] Исправление багов
- [ ] Тест на РЕД ОС / Astra

### Этап 6: Релиз MVP (Неделя 9)

- [ ] Документация пользователя
- [ ] Сборка AppImage
- [ ] Публикация на GitHub

---

## 9. Приёмочные критерии MVP

| # | Критерий | Проверка |
|---|----------|----------|
| 1 | Приложение запускается на Debian 11 | Запуск без ошибок |
| 2 | Подключение к Фазан-19 по RS-485 | Устройство появляется в списке |
| 3 | Чтение всех параметров | Все поля заполнены корректно |
| 4 | Изменение частоты | Частота меняется на устройстве |
| 5 | Управление ПШ | ПШ вкл/выкл работает |
| 6 | Отображение ошибок | Ошибки показываются красным |
| 7 | Журнал событий | События записываются в БД |
| 8 | Работа 24 часа | Нет утечек памяти, зависаний |

---

## 10. Глоссарий

| Термин | Определение |
|--------|-------------|
| ЭРТОС | Эксплуатация радиотехнического оборудования и связи |
| ОВД | Организация воздушного движения |
| РС | Радиостанция |
| ПШ | Подавитель шума |
| PTT | Push-To-Talk (включение передачи) |
| МУ/ДУ | Местное управление / Дистанционное управление |
| ТЛФ/ДАН | Телефонный режим / Режим передачи данных |
| Modbus RTU | Протокол промышленной автоматизации |
| RS-485 | Стандарт физического уровня для последовательной связи |

---

## 11. Ссылки

1. GitHub проекта: https://github.com/qazwsxedcasddc-tech/rcms-ga
2. Референсная реализация: https://github.com/drudrum/fazan_19P50
3. Форум ЭРТОС: https://ertos.ru/threads/vzaimodejstvie-po-styku-rs-485-s-radiosredstvami-serii-fazan-19.165/
4. Завод "Электроприбор": https://electropribor.ru/
